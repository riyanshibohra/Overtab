<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chrome Built-in AI API Comparison Test</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    h1 {
      color: white;
      text-align: center;
      margin-bottom: 10px;
      font-size: 32px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .subtitle {
      color: rgba(255,255,255,0.9);
      text-align: center;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .test-section {
      background: white;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .test-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid #e8eaed;
    }
    
    .test-title {
      font-size: 20px;
      font-weight: 600;
      color: #202124;
    }
    
    .test-badge {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    textarea {
      width: 100%;
      padding: 16px;
      border: 2px solid #e8eaed;
      border-radius: 8px;
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
      min-height: 100px;
      margin-bottom: 16px;
      transition: border-color 0.2s;
    }
    
    textarea:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .button-group {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    button {
      flex: 1;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }
    
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }
    
    .btn-test-all {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
      padding: 16px 32px;
      font-size: 16px;
      margin-bottom: 30px;
      width: 100%;
    }
    
    .results-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .result-box {
      background: #f8f9fa;
      border: 2px solid #e8eaed;
      border-radius: 12px;
      padding: 16px;
      min-height: 150px;
    }
    
    .result-label {
      font-weight: 600;
      color: #5f6368;
      margin-bottom: 8px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .result-content {
      color: #202124;
      line-height: 1.6;
      font-size: 14px;
      white-space: pre-wrap;
    }
    
    .loading {
      color: #667eea;
      font-style: italic;
    }
    
    .error {
      color: #d93025;
      background: #fce8e6;
      padding: 12px;
      border-radius: 8px;
      font-size: 13px;
    }
    
    .success {
      color: #1e8e3e;
    }
    
    .timing {
      font-size: 12px;
      color: #5f6368;
      margin-top: 8px;
      font-style: italic;
    }
    
    .status-bar {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .status-item {
      text-align: center;
    }
    
    .status-label {
      font-size: 11px;
      color: #5f6368;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }
    
    .status-value {
      font-size: 14px;
      font-weight: 600;
      padding: 4px 12px;
      border-radius: 6px;
      display: inline-block;
    }
    
    .status-ready { background: #e6f4ea; color: #1e8e3e; }
    .status-unavailable { background: #fce8e6; color: #d93025; }
    .status-checking { background: #e8f0fe; color: #1967d2; }
    
    .winner-badge {
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
      color: #000;
      padding: 4px 12px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 700;
      display: inline-block;
      margin-top: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üß™ Chrome Built-in AI API Comparison</h1>
    <p class="subtitle">Test specialized APIs vs LanguageModel approach ‚Ä¢ Compare quality, speed, and formatting</p>
    
    <div class="status-bar" id="status-bar">
      <div class="status-item">
        <div class="status-label">LanguageModel</div>
        <div class="status-value status-checking" id="status-languagemodel">Checking...</div>
      </div>
      <div class="status-item">
        <div class="status-label">Summarizer</div>
        <div class="status-value status-checking" id="status-summarizer">Checking...</div>
      </div>
      <div class="status-item">
        <div class="status-label">Rewriter</div>
        <div class="status-value status-checking" id="status-rewriter">Checking...</div>
      </div>
      <div class="status-item">
        <div class="status-label">Translator</div>
        <div class="status-value status-checking" id="status-translator">Checking...</div>
      </div>
      <div class="status-item">
        <div class="status-label">Proofreader</div>
        <div class="status-value status-checking" id="status-proofreader">Checking...</div>
      </div>
    </div>
    
    <!-- Test 1: Explanation / Summary -->
    <div class="test-section">
      <div class="test-header">
        <h2 class="test-title">üìù Test 1: Explanation / Summary</h2>
        <span class="test-badge">Summarizer vs LanguageModel</span>
      </div>
      <textarea id="input-explain" placeholder="Enter text to explain...">The race was run during the hottest part of the day on dusty country roads with minimal water supply; while 32 athletes coming from seven nations (the United States, France, Cuba, Greece, the Orange River Colony, Great Britain, and Canada) competed, only 14 managed to complete the race, which was a bizarre affair due to poor organization and officiating.</textarea>
      <div class="button-group">
        <button class="btn-primary" onclick="testExplain()">Test Both APIs</button>
      </div>
      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">üéØ Summarizer API (Specialized)</div>
          <div class="result-content" id="result-summarizer">Results will appear here...</div>
        </div>
        <div class="result-box">
          <div class="result-label">üí≠ LanguageModel API (Custom Prompt)</div>
          <div class="result-content" id="result-languagemodel-explain">Results will appear here...</div>
        </div>
      </div>
    </div>
    
    <!-- Test 2: Simplification -->
    <div class="test-section">
      <div class="test-header">
        <h2 class="test-title">‚ú® Test 2: Simplification</h2>
        <span class="test-badge">Rewriter vs LanguageModel</span>
      </div>
      <textarea id="input-simplify" placeholder="Enter text to simplify...">Upon being confronted by furious race officials with these allegations, Lorz immediately admitted his deception. Despite his claim that he was playing a practical joke, the AAU responded by banning Lorz for life; this was commuted to six months on February 19, 1905, after Lorz formally apologized and it was found that he had not intended to defraud.</textarea>
      <div class="button-group">
        <button class="btn-primary" onclick="testSimplify()">Test Both APIs</button>
      </div>
      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">üîÑ Rewriter API (Specialized)</div>
          <div class="result-content" id="result-rewriter">Results will appear here...</div>
        </div>
        <div class="result-box">
          <div class="result-label">üí≠ LanguageModel API (Custom Prompt)</div>
          <div class="result-content" id="result-languagemodel-simplify">Results will appear here...</div>
        </div>
      </div>
    </div>
    
    <!-- Test 3: Translation -->
    <div class="test-section">
      <div class="test-header">
        <h2 class="test-title">üåê Test 3: Translation (to Spanish)</h2>
        <span class="test-badge">Translator vs LanguageModel</span>
      </div>
      <textarea id="input-translate" placeholder="Enter text to translate...">The race was run during the hottest part of the day on dusty country roads with minimal water supply.

While Frederick Lorz was greeted as the apparent winner, he was later disqualified as he had hitched a ride in a car for part of the race.

The actual winner, Thomas Hicks, was near collapse and hallucinating by the end of the race.</textarea>
      <div class="button-group">
        <button class="btn-primary" onclick="testTranslate()">Test Both APIs</button>
      </div>
      <div class="results-grid">
        <div class="result-box">
          <div class="result-label">üåç Translator API (Specialized)</div>
          <div class="result-content" id="result-translator">Results will appear here...</div>
        </div>
        <div class="result-box">
          <div class="result-label">üí≠ LanguageModel API (Custom Prompt)</div>
          <div class="result-content" id="result-languagemodel-translate">Results will appear here...</div>
        </div>
      </div>
    </div>
    
    <!-- Test 4: Proofreading (NEW!) -->
    <div class="test-section">
      <div class="test-header">
        <h2 class="test-title">‚úÖ Test 4: Proofreading (NEW FEATURE)</h2>
        <span class="test-badge">Proofreader API</span>
      </div>
      <textarea id="input-proofread" placeholder="Enter text with grammar errors...">The athelte was running very quick but he didnt had enough water during the race. It were a very hot day and alot of runners couldnt finished the marathon because of poor organizaton.</textarea>
      <div class="button-group">
        <button class="btn-secondary" onclick="testProofread()">Test Proofreader API</button>
      </div>
      <div class="result-box">
        <div class="result-label">‚úèÔ∏è Proofreader API Result</div>
        <div class="result-content" id="result-proofreader">Results will appear here...</div>
      </div>
    </div>
    
    <button class="btn-test-all" onclick="runAllTests()">üöÄ Run All Tests</button>
  </div>

  <script>
    // Check API availability on load
    async function checkAPIAvailability() {
      const apis = [
        { name: 'LanguageModel', id: 'status-languagemodel', check: () => typeof LanguageModel !== 'undefined' ? LanguageModel.availability() : null },
        { name: 'Summarizer', id: 'status-summarizer', check: () => typeof Summarizer !== 'undefined' ? Summarizer.availability() : null },
        { name: 'Rewriter', id: 'status-rewriter', check: () => typeof Rewriter !== 'undefined' ? Rewriter.availability() : null },
        { name: 'Translator', id: 'status-translator', check: () => typeof Translator !== 'undefined' ? Translator.availability({ sourceLanguage: 'en', targetLanguage: 'es' }) : null },
        { name: 'Proofreader', id: 'status-proofreader', check: () => typeof Proofreader !== 'undefined' ? Proofreader.availability() : null }
      ];
      
      for (const api of apis) {
        try {
          const status = await api.check();
          const el = document.getElementById(api.id);
          if (status === 'readily' || status === 'available') {
            el.textContent = 'Ready ‚úì';
            el.className = 'status-value status-ready';
          } else if (status) {
            el.textContent = status;
            el.className = 'status-value status-checking';
          } else {
            el.textContent = 'Not Available';
            el.className = 'status-value status-unavailable';
          }
        } catch (e) {
          document.getElementById(api.id).textContent = 'Not Available';
          document.getElementById(api.id).className = 'status-value status-unavailable';
        }
      }
    }
    
    checkAPIAvailability();
    
    // Test 1: Explanation
    async function testExplain() {
      const text = document.getElementById('input-explain').value;
      const summarizerEl = document.getElementById('result-summarizer');
      const languagemodelEl = document.getElementById('result-languagemodel-explain');
      
      // Test Summarizer API
      summarizerEl.innerHTML = '<div class="loading">‚è≥ Testing Summarizer API...</div>';
      const startSummarizer = Date.now();
      try {
        const summarizer = await Summarizer.create();
        const result = await summarizer.summarize(text);
        const time = Date.now() - startSummarizer;
        summarizerEl.innerHTML = `<div class="success">${result}</div><div class="timing">‚è±Ô∏è ${time}ms</div>`;
        summarizer.destroy();
      } catch (e) {
        summarizerEl.innerHTML = `<div class="error">Error: ${e.message}</div>`;
      }
      
      // Test LanguageModel API with custom prompt
      languagemodelEl.innerHTML = '<div class="loading">‚è≥ Testing LanguageModel API...</div>';
      const startLM = Date.now();
      try {
        const session = await LanguageModel.create();
        const prompt = `Explain this text in a clear and concise way. Start with a 1-sentence summary, then provide 3-5 bullet points highlighting the key details:\n\n"${text}"`;
        const result = await session.prompt(prompt);
        const time = Date.now() - startLM;
        languagemodelEl.innerHTML = `<div class="success">${result}</div><div class="timing">‚è±Ô∏è ${time}ms</div>`;
        session.destroy();
      } catch (e) {
        languagemodelEl.innerHTML = `<div class="error">Error: ${e.message}</div>`;
      }
    }
    
    // Test 2: Simplification
    async function testSimplify() {
      const text = document.getElementById('input-simplify').value;
      const rewriterEl = document.getElementById('result-rewriter');
      const languagemodelEl = document.getElementById('result-languagemodel-simplify');
      
      // Test Rewriter API
      rewriterEl.innerHTML = '<div class="loading">‚è≥ Testing Rewriter API...</div>';
      const startRewriter = Date.now();
      try {
        const rewriter = await Rewriter.create();
        const result = await rewriter.rewrite(text);
        const time = Date.now() - startRewriter;
        rewriterEl.innerHTML = `<div class="success">${result}</div><div class="timing">‚è±Ô∏è ${time}ms</div>`;
        rewriter.destroy();
      } catch (e) {
        rewriterEl.innerHTML = `<div class="error">Error: ${e.message}</div>`;
      }
      
      // Test LanguageModel API with custom prompt
      languagemodelEl.innerHTML = '<div class="loading">‚è≥ Testing LanguageModel API...</div>';
      const startLM = Date.now();
      try {
        const session = await LanguageModel.create();
        const prompt = `Simplify the following text into very simple, easy-to-understand language. Use basic words that a 10-year-old would understand. Break down complex concepts into clear, short sentences. Avoid jargon and technical terms.\n\n"${text}"`;
        const result = await session.prompt(prompt);
        const time = Date.now() - startLM;
        languagemodelEl.innerHTML = `<div class="success">${result}</div><div class="timing">‚è±Ô∏è ${time}ms</div>`;
        session.destroy();
      } catch (e) {
        languagemodelEl.innerHTML = `<div class="error">Error: ${e.message}</div>`;
      }
    }
    
    // Test 3: Translation
    async function testTranslate() {
      const text = document.getElementById('input-translate').value;
      const translatorEl = document.getElementById('result-translator');
      const languagemodelEl = document.getElementById('result-languagemodel-translate');
      
      // Test Translator API
      translatorEl.innerHTML = '<div class="loading">‚è≥ Testing Translator API...</div>';
      const startTranslator = Date.now();
      try {
        const translator = await Translator.create({
          sourceLanguage: 'en',
          targetLanguage: 'es'
        });
        const result = await translator.translate(text);
        const time = Date.now() - startTranslator;
        translatorEl.innerHTML = `<div class="success">${result}</div><div class="timing">‚è±Ô∏è ${time}ms</div>`;
        translator.destroy();
      } catch (e) {
        translatorEl.innerHTML = `<div class="error">Error: ${e.message}</div>`;
      }
      
      // Test LanguageModel API with custom prompt
      languagemodelEl.innerHTML = '<div class="loading">‚è≥ Testing LanguageModel API...</div>';
      const startLM = Date.now();
      try {
        const session = await LanguageModel.create();
        const lines = text.split('\n');
        const hasBullets = text.match(/^[\*\-‚Ä¢]\s/m);
        const hasMultipleLines = lines.length > 1;
        
        let instructions = '';
        if (hasBullets) {
          instructions = 'Translate each bullet point. Keep the same bullet markers and line structure. Do NOT add introductory text.';
        } else if (hasMultipleLines) {
          instructions = 'Translate each line/paragraph. Preserve the line breaks and paragraph structure. Do NOT convert to bullet points.';
        } else {
          instructions = 'Translate the paragraph. Keep it as a flowing paragraph, do NOT convert to bullet points.';
        }
        
        const prompt = `Translate this English text to Spanish:\n\n${text}\n\n${instructions}\n\nProvide ONLY the translation, nothing else.`;
        const result = await session.prompt(prompt);
        const time = Date.now() - startLM;
        languagemodelEl.innerHTML = `<div class="success">${result.trim()}</div><div class="timing">‚è±Ô∏è ${time}ms</div>`;
        session.destroy();
      } catch (e) {
        languagemodelEl.innerHTML = `<div class="error">Error: ${e.message}</div>`;
      }
    }
    
    // Test 4: Proofreading
    async function testProofread() {
      const text = document.getElementById('input-proofread').value;
      const proofreaderEl = document.getElementById('result-proofreader');
      
      proofreaderEl.innerHTML = '<div class="loading">‚è≥ Testing Proofreader API...</div>';
      const startProofreader = Date.now();
      try {
        const proofreader = await Proofreader.create();
        const result = await proofreader.proofread(text);
        const time = Date.now() - startProofreader;
        
        // Proofreader returns an object - let's inspect it
        console.log('Proofreader result:', result);
        console.log('Result type:', typeof result);
        console.log('Result keys:', Object.keys(result));
        
        // Display as formatted JSON for now to see structure
        const resultHTML = `<pre style="background: #f8f9fa; padding: 12px; border-radius: 6px; overflow-x: auto;">${JSON.stringify(result, null, 2)}</pre>`;
        
        proofreaderEl.innerHTML = `<div class="success">${resultHTML}</div><div class="timing">‚è±Ô∏è ${time}ms</div><div style="margin-top: 12px; padding: 12px; background: #e8f0fe; border-radius: 6px; font-size: 13px; color: #1967d2;"><strong>Note:</strong> Proofreader returns structured data. Check console for details.</div>`;
        proofreader.destroy();
      } catch (e) {
        proofreaderEl.innerHTML = `<div class="error">Error: ${e.message}<br><br>Stack: ${e.stack}</div>`;
      }
    }
    
    // Run all tests
    async function runAllTests() {
      await testExplain();
      await new Promise(resolve => setTimeout(resolve, 500));
      await testSimplify();
      await new Promise(resolve => setTimeout(resolve, 500));
      await testTranslate();
      await new Promise(resolve => setTimeout(resolve, 500));
      await testProofread();
    }
  </script>
</body>
</html>

